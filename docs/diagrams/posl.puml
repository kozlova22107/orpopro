@startuml

actor Игрок

participant Игра
participant Сетка
participant Ячейка
participant Виджеты
participant Ввод
participant Игровой_Движок
participant Меню

Игрок -> Игра : запуск()
Игра -> Сетка : __init__(ширина, высота)
Игра -> Виджеты : __init__()
Игра -> Ввод : __init__()
Игра -> Игровой_Движок : __init__(сетка)
Игра -> Меню : __init__()

loop
    Игрок -> Игра : обработка_событий(события)
    Игра -> Виджеты : обработка(событие)
    Игра -> Ввод : обработка(событие)
    Игра -> Меню : обработка_событий(события)

    Игра -> Сетка : открыть(x, y)
    Сетка -> Ячейка : проверка_бомбы()
    Сетка -> Ячейка : нажать()
    Сетка -> Игровой_Движок : обработка_клика(x, y)
    Игровой_Движок -> Сетка : подсчитать_соседей(x, y)
    Игровой_Движок -> Сетка : открыть(x, y)
    Игровой_Движок -> Сетка : обновить_флаги()
    Игровой_Движок -> Игра : проверить_победу()
    Игровой_Движок -> Игра : проверить_поражение()

    Игра -> Виджеты : отрисовать(экран)
    Игра -> Ввод : отрисовать(экран)
    Игра -> Сетка : отрисовать(экран)
    Игра -> Меню : отрисовать(экран)
    Игра -> экран : обновить()
end

@enduml
